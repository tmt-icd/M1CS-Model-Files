subsystem = M1CS
component = GLC
description = """
  The Control Assembly (GLC) receives commands for M1CS from outside of M1CS.

  - *Note*: explicit SUCCESS/FAILURE resultTypes have been removed because they are redudant with CSW Completed/Error return types. KG-8/22/25
  - *Note*: time parameters were removed in cases where they duplicated the time included in CSW events. KG: 8/28/25
"""
receive = [

  {
    # Command section for commands originating from the TCS or APS
    name = SetOperatingMode
    description = "Changes the M1CS Operating Mode to IDLE or RUNNING. M1CS starts up in IDLE state and requires being set to RUNNING in order to control hardware. Setting to IDLE disallows hardware motion."
    completionType = immediate
    requiredArgs = [mode]
    role = user
    args = [
      {
        name = mode
        description = "The M1CS operating mode can be IDLE or RUNNING."
        enum = [IDLE, RUNNING]
      }
    ]
  }

  {
    name = ClearOuterLoopState
    description = "Used by TCS to clear the internal state information used by the RTC's outer loop as the TCS corrections module changes between AGWFS and NIFIRAOS."
    completionType = immediate
    role = user
  }

  {
    name = SaveActPositions
    description = """
       Averages the instantaneous actuator positions for a specified period of time and stores the results in a specified output file using the provided elevation.

       This command is primarily used by a sequence that measures the positions at a set of elevations and processes the data as a set to produce a new Actuator LUT for RTC.
       """
    requiredArgs = [elevation, outputFile]
    completionType = longRunning
    role = eng
    args = [
      {
        name = duration
        description = "The length of time to average the instantaneous actuator positions."
        type = integer
        units = second
        default = 10
      }
      {
        name = elevation
        description = "The elevation that should be included in the output file for this measurement."
        type = float
        units = degree
      }
      {
        name = outputFile
        description = "The fullpath including directory location and file name for the collected data."
        type = string
      }
    ]
  }

  {
    name = MeasureAMatrix
    description = """
      Directs the M1CS to perform the A-matrix measurement routine tagged with the provided zenith angle and stores the results in a specific output file using the provided elevation.

      This command is primarily used by a sequence that measures the positions at a set of elevations and processes the data as a set to produce a new set of control matrices for the RTC.
      """
    completionType = longRunning
    requiredArgs = [duration, elevation, outputFile]
    role = eng
    args = [
      {
        name = algorithm
        description = "Identifier to support more advanced algorithms described in M1CS OCDD.  The default is the RGB algorithm."
        enum = [RGB]
        units = second
        default = RGB
      }
      {
        name = elevation
        description = "The elevation that should be included in the output file for this measurement."
        type = float
        units = degree
      }
      {
        name = duration
        description = "The length of time to average the segment heights and actuator positions."
        type = integer
        default = 10
        units = second
      }
      {
        name = outputFile
        description = "The fullpath including directory location and file name for the collected data."
        type = string
      }
    ]
  }

  {
    name = InitializeSegment
    description = """
                Initialise segment in mirror cell location segmentLocation for the electronic id segmentId.  This command would also:

                1. Calculate new sensor waveform parameters for the segment using the segment manufacturing data for this segment and its neighbouring segments
                2. Reset the sensor calibration coefficients used by the RTC.
                3. TuneSensorPhases() to correct the sensor height and gap waveform parameters.
                4. Update the A & B matrices to slave the new segment.
                5. Check the strain gauge readouts against the last known values.  Alternatively we may elect to simply reset these values to new default values.
                """
    requiredArgs = [sector, segment, segmentEId]
    completionType = longRunning
    role = eng
    args = [
      {
        name = sector
        enum: ['A', 'B', 'C', 'D', 'E', 'F']
        description = "The sector identifier S is a letter from A to F."
      }
      {
        name = segment
        type = integer
        minimum = 1
        maximum = 82
        description = "The segment identifier is an integer from 1 to 82."
      }
      {
        name = segmentEId
        description = "The segments electronic identifier from segment's Electronic ID chip"
        type = long
      }
    ]
  }

  {
    name = EnableSegment
    description = "Adds the indicated mirror location to the set of active segments. Place the segment in the de-stacked state. Updates the RTC, segments, and database as needed."
    requiredArgs = [sector, segment]
    completionType = longRunning
    role = eng
    args = [
      {
        name = sector
        enum: ['A', 'B', 'C', 'D', 'E', 'F']
        description = "The sector identifier S is a letter from A to F."
      }
      {
        name = segment
        type = integer
        minimum = 1
        maximum = 82
        description = "The segment identifier is an integer from 1 to 82."
      }
    ]
  }

  {
    name = DisableSegment
    description = "Removes the indicated mirror location from the set of active segments. Place the segment in the stacked state. Updates the RTC, segments, and database as needed."
    requiredArgs = [sector, segment]
    completionType = longRunning
    role = eng
    args = [
      {
        name = sector
        enum: ['A', 'B', 'C', 'D', 'E', 'F']
        description = "The sector identifier S is a letter from A to F."
      }
      {
        name = segment
        type = integer
        minimum = 1
        maximum = 82
        description = "The segment identifier is an integer from 1 to 82."
      }
    ]
  }

  {
    name = EnableActuator
    description = "Adds one or all of the actuators at the segment location to the set of actuators controlled by the RTC. Updates the RTC, segments, and database as needed."
    requiredArgs = [sector, segment, actuator]
    completionType = longRunning
    role = eng
    args = [
      {
        name = sector
        enum: ['A', 'B', 'C', 'D', 'E', 'F']
        description = "The sector identifier S is a letter from A to F."
      }
      {
        name = segment
        type = integer
        minimum = 1
        maximum = 82
        description = "The segment identifier is an integer from 1 to 82."
      }
      {
        name = actuator
        description = "Actuator on segment to be enabled or ALL to disable all actuators on the segment."
        enum = [1, 2, 3, ALL]
      }
    ]
  }

  {
    name = DisableActuator
    description = "Removes one or all of the actuators at segment location from the set of actuators controlled by the M1CS RTC. Updates the RTC, segments, and database as needed."
    requiredArgs = [sector, segment, actuator]
    completionType = longRunning
    role = eng
    args = [
      {
        name = sector
        enum: ['A', 'B', 'C', 'D', 'E', 'F']
        description = "The sector identifier S is a letter from A to F."
      }
      {
        name = segment
        type = integer
        minimum = 1
        maximum = 82
        description = "The segment identifier is an integer from 1 to 82."
      }
      {
        name = actuator
        description = "Actuator on segment to be disabled or ALL to disable all actuators on the segment."
        enum = [1, 2, 3, ALL]
      }
    ]
  }

  {
    name = EnableSensor
    description = "Adds one or all sensors at the segment location to the set of sensors in use as inputs to the RTC control loop. Updates the RTC, segments, and database as needed."
    requiredArgs = [sector, segment, sensor]
    completionType = longRunning
    role = eng
    parameters = [
      {
        name = sector
        enum: ['A', 'B', 'C', 'D', 'E', 'F']
        description = "The sector identifier S is a letter from A to F."
      }
      {
        name = segment
        type = integer
        minimum = 1
        maximum = 82
        description = "The segment identifier is an integer from 1 to 82."
      }
      {
        name = sensor
        description = "Sensor to add to list of sensor inputs."
        enum = [1, 2, 3, 4, 5, 6, ALL]
      }
    ]
  }

  {
    name = DisableSensor
    description = "Removes one or all sensors at segment location from the set of sensors used by the RTC control loop as inputs. Updates the RTC, segments, and database as needed."
    requiredArgs = [sector, segment, sensor]
    completionType = longRunning
    role = eng
    parameters = [
      {
        name = sector
        enum: ['A', 'B', 'C', 'D', 'E', 'F']
        description = "The sector identifier S is a letter from A to F."
      }
      {
        name = segment
        type = integer
        minimum = 1
        maximum = 82
        description = "The segment identifier is an integer from 1 to 82."
      }
      {
        name = sensor
        description = "Sensor to remove from list of sensor inputs"
        enum = [1, 2, 3, 4, 5, 6, ALL]
      }
    ]
  }

  {
    name = GetActuatorPositions
    description = """
      Returns the 1476 current actuator positions as an array of size 492x3.
    """
    completionType = longRunning
    role = user
    resultType = [
      {
        name = positions
        description = "Actuator positions as measured by the actuator encoders. With location [S, P], S is the segment starting at A1 at index 0. P is one of three segment actuator positions."
        type = array
        dimensions = [492, 3]
        items = {
          type = float
        }
        units = micron
      }
    ]
  }

  {
    name = GetOneActuator
    description = """
      Returns current state information for one actuator specified with a mirror location and an actuator number.
      Full contents TBD.
    """
    requiredArgs = [sector, segment, actuator]
    completionType = longRunning
    role = user
    parameters = [
      {
        name = sector
        enum: ['A', 'B', 'C', 'D', 'E', 'F']
        description = "The sector identifier S is a letter from A to F."
      }
      {
        name = segment
        type = integer
        minimum = 1
        maximum = 82
        description = "The segment identifier is an integer from 1 to 82."
      }
      {
        name = actuator
        type = integer
        minimum = 1
        maximum = 3
        description = "The actuator identifier is an integer from 1 to 3."
      }
    ]
    resultType = [
      {
        name = actuatorName
        type = string
        description = "A string of the form SectorSegment-Actuator - A22-2, that confirms correct data."
      }
      {
        name = actuatorEId
        type = string
        description = "The actuator's electronic identifier read from the hardware."
      }
      {
        name = encoder
        description = "The actuator position as measured by the actuator encoders."
        type = float
        units = micron
      }
      {
        name = positionError
        type = float
        description = "The actuator position error."
      }
      {
        name = target
        description = "The actuator position/target as measured by the actuator encoders."
        type = float
        units = micron
      }
      {
        name = othersTBD
        type = string
        description = "Important values will be added as discovered during development."
      }
    ]
  }

  {
    name = GetSensorValues
    description = """
      Returns current sensor gaps and heights from RTC. *Note that not all segments have the same number of sensors!*
    """
    completionType = longRunning
    role = user
    resultType = [
      {
        name = gaps
        description = "Calculated edge sensor gaps from RTC."
        type = array
        units = micron
        dimensions = [2772]
        items = {
          type = float
        }
      }
      {
        name = heights
        description = "Calculated edge sensor heights after correcting for gap."
        type = array
        units = micron
        dimensions = [2772]
        items = {
          type = float
        }
      }
    ]
  }

  {
    name = GetOneSensor
    description = """
      Returns current state information for one sensor specified with a mirror location and a sensor number.
      Full contents TBD.
    """
    requiredArgs = [sector, segment, sensor]
    completionType = longRunning
    role = user
    parameters = [
      {
        name = sector
        enum: ['A', 'B', 'C', 'D', 'E', 'F']
        description = "The sector identifier S is a letter from A to F."
      }
      {
        name = segment
        type = integer
        minimum = 1
        maximum = 82
        description = "The segment identifier is an integer from 1 to 82."
      }
      {
        name = sensor
        type = integer
        minimum = 1
        maximum = 12
        description = "The actuator identifier is an integer from 1 to 3."
      }
    ]
    resultType = [
      {
        name = sensorName
        type = string
        description = "A string of the form SectorSegment-Sensor - A80-5, that confirms correct data."
      }
      {
        name = othersTBD
        type = string
        description = "Important values will be added as discovered during development."
      }
    ]
  }

  {
    name = GetWarpingHarnessStrains
    description = """
      Returns the current warping harness strain gauge force for each of the 21 strain gauges on the 492 segments.
    """
    completionType = longRunning
    role = eng
    resultType = [
      {
        name = strain
        description = "Current value of each of the 21 strain gauges attached to the 492 segments."
        type = array
        dimensions = [492, 21]
        items = {
          type = float
        }
        units = newton
      }
      {
        name = highLimit
        description = "Upper limit for each of the 21 gauges attached to the 492 segments."
        type = array
        dimensions = [492, 21]
        items = {
          type = float
        }
        units = newton
      }
      {
        name = lowLimit
        description = "Lower limit for each of the 21 gauges attached to the 492 segments."
        type = array
        dimensions = [492, 21]
        items = {
          type = float
        }
        units = newton
      }
    ]
  }

  {
    name = GetPistonTipTilt
    description = """
      Returns the current and target outer control loop piston, tip and tilt values.
    """
    completionType = immediate
    role = user
    resultType = [
      {
        name = current
        description = "Current M1 Tip(0), Tilt(1), Piston(2)"
        type = array
        units = micron
        dimensions = [3]
        items = {
          type = float
        }
      }
      {
        name = target
        description = "M1 Tip(0), Tilt(1), Piston(2) target from the TCS elevation angle."
        type = array
        units = micron
        dimensions = [3]
        items = {
          type = float
        }
      }
    ]
  }

  {
    name = GetOuterLoopControlCommand
    description = """
      Returns the current outer control loop control commands as an array of length 24.
    """
    completionType = immediate
    role = user
    resultType = [
      {
        name = cmds
        description = "Calculated outer loop controller commands."
        type = array
        units = micron
        dimensions = [24]
        items = {
          type = float
        }
      }
    ]
  }

  {
    name = GetSegmentTemperatures
    description = """
      Returns the temperatures measured by the thermistors mounted on the upper segment attached to the segment warping harness cables.
      Each segment has 3 temperature probes. The returned value is the same data as is published by the M1SegmentTemperatures event.
    """
    completionType = longRunning
    role = user
    resultType = [
      {
        name = temperatures
        description = """
          Temperatures reported by upper segment thermistors. With location [S, T], S is the segment starting at A1 at location 0. T is one of three segment temperatures.
          Unavailable values are indicated with -1.
        """
        type = array
        dimensions = [492, 3]
        items = {
          type = float
        }
      }
    ]
  }

  {
    name = GetSegmentStatus
    description = """
      Returns a description of the current mirror configuration. Information includes which segments are installed and active
      along with the segment electronic identifiers and names of installed segments.
      The returned value is the same data as is published by the M1SegmentStatus event.
    """
    completionType = longRunning
    role = user
    resultType = [
      {
        name = status
        description = "The status of the M1 segments ordered by ascending mirror cell locatons [A-F][1-82]. Index 0 is A1."
        type = array
        items = {
          enum = [INSTALLED, ACTIVE, UNINSTALLED]
        }
      }
      {
        name = segmentId
        description = """
          Installed segment electronic IDs ordered by ascending mirror cell locatons [A-F][1-82].
          Index 0 is A1.
          """
        type = array
        dimensions = [492]
        items = {
          type = integer
        }
      }
      {
        name = segmentSerialNum
        description = """
          Serial number of the installed segments ordered by ascending mirror cell locatons [A-F][1-82].
          The integer is the integer portion of SN-XXX.
          """
        type = array
        dimensions = [492]
        items = {
          type = integer
        }
      }
    ]
  }

  {
    name = VerifyConfiguration
    description = """
      This command will check that the M1CS configuration is correct for the installed M1CS hardware.
      This command can be executed at any time, but should be used to verify the configuration following a
      segment exchange and mirror phasing, or any other hardware change.  Note that this command reports, but
      does not fix any configuration issues.

      If the command returns CSW Completed, there is no configuration issue, the configuration matches the installed hardware.

      The command will return CSW Error with a message that describes any discovered configuration issues.
    """
    completionType = longRunning
    role = user
  }

  {
    name = DeepVerifyConfiguration
    description = """
      This command initially execute VerifyConfiguration.
      In addition, it reads the internal parameters for all acuators and sensors on each segment and compares them with
      the expected values in the current configuration files.

      If the command returns CSW Completed, there is no configuration issue, the configuration matches the installed hardware.

      The command will return CSW Error with a message that describes any discovered configuration issues.
    """
    completionType = longRunning
    role = eng
  }

  {
    name = ActuatorToSensorSelfTest
    description = "Allows the telescope operator to verify the actuators and sensors are functioning correctly."
  }

  # Command section for commands originating from the APS
  {
    name = SaveSensorSettings
    description = """
	            |This command saves the internal parameters the M1CS  that determines the current rigid body position of the primary mirror segments
	            | in order to allow the position of the segments to be restored in the future.
	            """
    requiredArgs = [alignmentState]
    completionType = longRunning
    role = eng
    parameters = [
      {
        name = alignmentState
        description = "Indicates the state of the mirror alignment procedure."
        enum = [INITIAL, PARTIALLY, ALIGNED, SENSOR_CAL, DIAG]
      }
      {
        name = metadata
        description = "Accompanying metadata describing the settings being saved."
        type = string
      }
    ]
    resultType = [
      {
        name = sensorSettingsDataId
        type = integer
        description = "The key the M1CS database that can be used to reference the internal parameters being stored.  0 on error."
      }
    ]
  }

  {
    name = GetSensorSettings
    description = """
	             |Returns the value of the key for the internal settings that M1CS is currently using.
	             | If any of the settings have been changed since they were last stored in the database
	             | this command will call SaveSensorSettings() to store them then return the new sensorSettingsDataId key.
	             """
    completionType = longRunning
    role = eng
    resultType = [
      {
        name = sensorSettingsDataId
        type = integer
        description = "The key the M1CS database that can be used to reference the internal parameters being stored.  0 on error."
      }
    ]
  }

  {
    name = RestoreSensorSettings
    description = "Instructs the M1CS to restore the internal settings that were previously stored with the call to SaveSensorSettings()."
    requiredArgs = [sensorSettingsDataId]
    completionType = longRunning
    role = eng
    parameters = [
      {
        name = sensorSettingsDataId
        description = "The key the M1CS database returned to identify the set of parameters to be restored."
        type = integer
      }
    ]
    resultType = [
      {
        name = alignmentState
        enum = [INITIAL, PARTIALLY, ALIGNED, SENSOR_CAL, DIAG]
        description = "Indicates the state of the mirror alignment procedure."
      }
      {
        name = metadata
        type = string
        description = "Accompanying metadata describing the settings being saved."
      }
    ]
  }

  {
    name = OffsetActuatorPositions
    description = """
                     |Updates the offset term of the sensor calibration coefficient’s that the M1CS RTC is using such that the actuators
                     |target position will move by the amount specified in the actuatorOffsets[] parameter.
                     | This command will return an error if the RTC is not in TRACK mode.
                     """
    requiredArgs = [actuatorOffsets]
    completionType = longRunning
    role = eng
    parameters = [
      {
        name = actuatorOffsets
        description = "The desired amount to offset the actuator target positions across the mirror in mm."
        type = array
        dimensions = [492, 3]
        items = {
          type = float
        }
        units = millimeter
      }
    ]
    completionType = longRunning
  }

  {
    name = OffsetActuatorPositionsOpenLoop
    description = """
                     |Changes the current actuator target positions by the amount specified in the actuatorOffsets[] parameter.
                     |This command will return an error if the RTC is in TRACK mode.
                     """
    requiredArgs = [actuatorOffsets]
    completionType = longRunning
    role = eng
    parameters = [
      {
        name = actuatorOffsets
        description = "The desired amount to offset the actuator target positions across the mirror in mm."
        type = array
        dimensions = [492, 3]
        items = {
          type = float
        }
        units = millimeter
      }
    ]
    completionType = longRunning
  }

  {
    name = OffloadSensorOffsets
    description = """
                    |Corrects the observed height offset in the edge sensor electronics.
                    |The command uses the offset term in the RTCs  sensor calibration coefficients to calculate new sensor waveform parameters such that
                    |sensor controller FPGA’s will remove the observed height offset and operate as a near perfect sensor about their  zero point.
                    |Note, the correction is not numerically exact.  After downloading the new waveforms into the FPGAs the offset term in the sensor calibration
                    |coefficients will be set to 0.
                    |The new configuration parameters are stored as if the SaveSensorSettings() command was called and the resulting ‘sensorSettingsDataId’
                    |is returned.
                    """
    requiredArgs = [segmentLocation]
    completionType = longRunning
    role = eng
    parameters = [
      {
        name = segmentLocation
        description = "Segment location in form [A-F][1-82] or ALL for all segments"
        type = string
      }
    ]
    resultType = [
      {
        name = sensorSettingsDataId
        description = "The key in the M1CS Database that can be used to reference the parameters stored previously.  CSW Error is returned if the operation fails."
        type = integer
        minimum = 0
      }
    ]
    completionType = longRunning
  }

  # APS Warping Harness commands

  {
    name = CalibrateWarpingHarness
    description = """
                    |Calibrate new parameters for the warping harness strain vs motor position curve then position the motor to the minimum starting point
                    |of the zero strain deadband position. The strain curves, one per warping harness, are characterized by a negative strain slope,
                    |starting  position of the zero strain deadband, strain offset of deadband region, width of deadband region, and  positive strain slope.
                    """"
    requiredArgs = ["segmentLocation", "warpingHarness"]
    completionType = longRunning
    role = eng
    parameters = [
      {
        name = segmentLocation
        description = "Segment location in form [A-F][1-82]"
        type = string
      }
      {
        name = warpingHarness
        description = "Warping Harness Motor Number [0=all, 1-21]"
        type = integer
        minimum = 0
        maximum = 21
      }
    ]
    completionType = longRunning
  }

  {
    name = GetWarpingHarnessConfig
    description = "Retrieve the warping harness configuration parameters in use by the specified segment."
    requiredArgs = [segmentLocation]
    completionType = longRunning
    role = eng
    parameters = [
      {
        name = segmentLocation
        description = "Segment location in form [A-F][1-82]"
        type = string
      }
    ]
    resultType = [
      {
        name = deadbandOffset
        type = array
        units = newton
        dimensions = [21]
        items = {
          type = float
        }
        description = "Deadband Offset"
      }
      {
        name = deadbandWidth
        type = array
        dimensions = [21]
        items = {
          type = float
        }
        description = "Deadband Width in motor steps"
      }
      {
        name = negativeStrainLimit
        type = array
        units = newton
        dimensions = [21]
        items = {
          type = float
        }
        description = "Negative Strain Limit"
      }
      {
        name = positiveStrainLimit
        type = array
        units = newton
        dimensions = [21]
        items = {
          type = float
        }
        description = "Positive Strain Limit"
      }
      {
        name = negativeStrainSlope
        type = array
        units = newton
        dimensions = [21]
        items = {
          type = float
        }
        description = "Negative strain slope in newton/motorstep"
      }
      {
        name = positiveStrainSlope
        type = array
        units = newton
        dimensions = [21]
        items = {
          type = float
        }
        description = "Positive strain slope in newton/motorstep"
      }
    ]
    completionType = longRunning
  }

  {
    name = ReadWarpingHarness
    description = "Returns the force being applied by the warping harnesses for all of the segments installed on the telescope."
    completionType = longRunning
    role = eng
    resultType = [
      {
        name = measuredForce
        description = "The force being applied by the warping harnesses for all 492 segments"
        type = array
        units = newton
        dimensions = [492, 21]
        items = {
          type = float
        }
      }
    ]
    completionType = longRunning
  }

  {
    name = SetWarpingHarness
    description = """
                    |Moves  the warping harness motors for the segment installed at ‘segmentLocation’ until the associated warping harnesses are applying
                    |the requested 'force' to the segment. While the M1CS supports sending multiple commands in succession to different segmentLocations
                    | the command will be rejected if the segment’s warping harness motors are already busy moving.
                    """
    requiredArgs = [segmentLocation, desiredForce]
    completionType = longRunning
    role: eng
    parameters = [
      {
        name = segmentLocation
        description = "Segment location in form [A-F][1-82]"
        type = string
      }
      {
        name = desiredForce
        description = "Desired force values for the segment"
        type = array
        units = newton
        dimensions = [21]
        items = {
          type = float
        }
      }
    ]
    resultType = [
      {
        name = measuredForce
        description = "The force measured  after the motors finish moving."
        type = array
        units = newton
        dimensions = [21]
        items = {
          type = float
        }
      }

    ]
    completionType = longRunning
  }

  {
    name = OffsetWarpingHarness
    description = """
                    |Moves the warping harness motors for the segment installed at ‘segmentLocation’ such that the forces applied to the segment are
                    |changed by deltaForce. While the M1CS supports sending multiple commands in succession to different segmentLocations
                    |the command will be rejected if the segment’s warping harness motors are already busy moving.
                    """
    requiredArgs = [segmentLocation, deltaForce]
    completionType = longRunning
    role: eng
    parameters = [
      {
        name = segmentLocation
        description = "Segment location in form [A-F][1-82]"
        type = string
      }
      {
        name = deltaForce
        description = "Desired delta force values for the segment"
        type = array
        units = newton
        dimensions = [21]
        items = {
          type = float
        }
      }
    ]
    resultType = [
      {
        name = measuredForce
        description = "The force measured  after the motors finish moving."
        type = array
        units = newton
        dimensions = [21]
        items = {
          type = float
        }
      }
    ]
    completionType = longRunning
  }

  {
    name = GetSegmentIds
    description = "Returns the segment electronic id’s of all of the segments installed on the telescope."
    completionType = longRunning
    role = user
    resultType = [
      {
        name = segmentElectronicsIds
        description = "Segment Electronics IDs in Segment ID order [A-F][1-82]"
        type = array
        dimensions = [492]
        items = {
          type = integer
        }
      }
    ]
    completionType = longRunning
  }
]

# Diagnostic Modes
diagnosticModes = [
  {
    hint = actuators
    description = """
       When in diagnostic mode "actuators", the M1ActuatorPositions event is published at 1 Hz.
    """
  }
  {
    hint = sensors
    description = """
       When in diagnostic mode "sensors", the M1SensorHeights event is published at 1 Hz, and
       M1SensorGaps event is published at 1 Hz.
    """
  }
  {
    hint = whstrains
    description = """
       When in diagnostic mode "whstrains", the M1WarpingHarnessStrains event is published at 1 Hz.
    """
  }
  {
    hint = pistontiptilt
    description = """
       When in diagnostic mode "pistontiptilt", the M1PistonTipTilt event is published at 1 Hz.
    """
  }
  {
    hint = outerloop
    description = """
       When in diagnostic mode "outerloop", the M1OuterLoopControlCommand event is published at 1 Hz.
    """
  }
  {
    hint = alldiags
    description = """
       When in diagnostic mode "alldiags", events from all diagnostic modes are published as described in the other hints.
    """
  }
]

# The following commands are send from the M1CS GLC to the M1CS Segment HCD and RTC HCD
send = [
  {
    name = GetOneSegSensorConfig
    subsystem = M1CS
    component = RTCHCD
  }
  {
    name = SetOneSegSensorWaveform
    subsystem = M1CS
    component = RTCHCD
  }
  {
    name = GetAllSegSensorConfig
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = SetAllSegSensorWaveform
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = SetActuator
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = EnableActuator
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = EnableSegment
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = DisableSegment
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = EnableEdgeSensor
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = CalOneWh
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = CalOneWhAllSegments
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = CalAllWhOnSegment
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = CalAllWh
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = SetSegmentWhStrains
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = OffsetSegmentWhStrains
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = GetSegmentWhStrains
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = OffsetSegmentWhPositions
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = InitSegmentWhPosition
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = GetAllWhConfig
    subsystem = M1CS
    component = SEGHCD
  }
  {
    name = updateElevation
    subsystem = M1CS
    component = rtcHCD
  }
  {
    name = updateFocus
    subsystem = M1CS
    component = rtcHCD
  }
  {
    name = updateWaveFrontError
    subsystem = M1CS
    component = rtcHCD
  }
  {
    name = SET_IDLE
    subsystem = M1CS
    component = rtcHCD
  }
  {
    name = SET_SLEW
    subsystem = M1CS
    component = rtcHCD
  }
  {
    name = SET_TRACK
    subsystem = M1CS
    component = rtcHCD
  }
  {
    name = SET_OPMODE_IDLE
    subsystem = M1CS
    component = rtcHCD
  }
  {
    name = SET_OPMODE_RUNNING
    subsystem = M1CS
    component = rtcHCD
  }
  {
    name = CLEAR_OUTER_LOOP_STATE
    subsystem = M1CS
    component = rtcHCD
  }
  {
    name = CAPTURE_ACTUATOR_POSITIONS
    subsystem = M1CS
    component = rtcHCD
  }
  {
    name = GET_SENSOR_VALUES
    subsystem = M1CS
    component = rtcHCD
  }
  {
    name = GET_OUTER_LOOP
    subsystem = M1CS
    component = rtcHCD
  }
  {
    name = GET_RTC_STATUS
    subsystem = M1CS
    component = rtcHCD
  }
]
